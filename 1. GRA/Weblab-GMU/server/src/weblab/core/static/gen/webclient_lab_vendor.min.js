!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else{if(!angular.isFunction(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");a=b[d](a,c)}}),a},i=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||i(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return h(a,b,e)}}}];var f=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=!1,A=".",B=0,C=!0,D="default",E={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},F="2.7.2",G=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};G.displayName="angular-translate/service: getFirstBrowserLanguage";var H=function(){var a=G()||"";return E[D]&&(a=E[D](a)),a};H.displayName="angular-translate/service: getLocale";var I=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},J=function(){return this.toString().replace(/^\s+|\s+$/g,"")},K=function(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(I(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],I(b,angular.lowercase(g))>-1))return g}}if(a){var k=a.split("_");if(k.length>1&&I(b,angular.lowercase(k[0]))>-1)return k[0]}return a},L=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],M(b));return this};this.translations=L,this.cloakClassName=function(a){return a?(x=a,this):x};var M=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?M(h,b.concat(e),c,e):(f=b.length?""+b.join(A)+A+e:e,b.length&&e===d&&(g=""+b.join(A),c[g]="@:"+f),c[f]=h));return c};M.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return N(a),this};var N=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return O(a),this};var O=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&I(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var P=function(a){return a?(v=a,this):l?l+v:v};this.storageKey=P,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.forceAsyncReload=function(a){return z=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},D=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():H();return e=u.length?K(b):b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?B:(B=a,this)},this.statefulFilter=function(a){return void 0===a?C:(C=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,A=b.get(n||"$translateDefaultInterpolation"),D=!1,E={},G={},H=function(a,b,c,h){if(angular.isArray(a)){var j=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return H(a,b,c,h).then(g,g),f.promise},i=0,j=a.length;j>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return j(a)}var m=d.defer();a&&(a=J.apply(a));var n=function(){var a=e?G[e]:G[i];if(l=0,k&&!a){var b=f.get(v);if(a=G[b],g&&g.length){var c=I(g,b);l=0===c?1:0,I(g,e)<0&&g.push(e)}}return a}();if(n){var o=function(){ab(a,b,c,h).then(m.resolve,m.reject)};o.displayName="promiseResolved",n["finally"](o,m.reject)}else ab(a,b,c,h).then(m.resolve,m.reject);return m.promise},Q=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},R=function(a){i=a,c.$emit("$translateChangeSuccess",{language:a}),k&&f.put(H.storageKey(),i),A.setLocale(i);var b=function(a,b){E[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(E,b),c.$emit("$translateChangeEnd",{language:a})},S=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),D=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,M(a))}):angular.extend(d,M(b)),D=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var T=function(a){var c=b.get(a);c.setLocale(e||i),E[c.getInterpolationIdentifier()]=c};T.displayName="interpolationFactoryAdder",angular.forEach(w,T)}var U=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(G[a]){var c=function(a){L(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",G[a].then(c,b.reject)}else b.reject();return b.promise},V=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?V(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",U(a).then(g,f.reject),f.promise},W=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return W(a,e.substr(2),c,d);d.setLocale(i)}return e},X=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},Y=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];V(i,b,c,e).then(h.resolve,function(){Y(a+1,b,c,e,f).then(h.resolve)})}else h.resolve(f?f:X(b,c));return h.promise},Z=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=W(f,b,c,d),e||(e=Z(a+1,b,c,d))}return e},$=function(a,b,c,d){return Y(u>0?u:l,a,b,c,d)},_=function(a,b,c){return Z(u>0?u:l,a,b,c)},ab=function(a,b,c,e){var f=d.defer(),h=i?t[i]:t,j=c?E[c]:A;if(h&&Object.prototype.hasOwnProperty.call(h,a)){var k=h[a];"@:"===k.substr(0,2)?H(k.substr(2),b,c,e).then(f.resolve,f.reject):f.resolve(j.interpolate(k,b))}else{var l;m&&!D&&(l=X(a,b)),i&&g&&g.length?$(a,b,j,e).then(function(a){f.resolve(a)},function(a){f.reject(Q(a))}):m&&!D&&l?f.resolve(e?e:l):e?f.resolve(e):f.reject(Q(a))}return f.promise},bb=function(a,b,c){var d,e=i?t[i]:t,f=A;if(E&&Object.prototype.hasOwnProperty.call(E,c)&&(f=E[c]),e&&Object.prototype.hasOwnProperty.call(e,a)){var h=e[a];d="@:"===h.substr(0,2)?bb(h.substr(2),b,c):f.interpolate(h,b)}else{var j;m&&!D&&(j=X(a,b)),i&&g&&g.length?(l=0,d=_(a,b,f)):d=m&&!D&&j?j:Q(a)}return d},cb=function(a){j===a&&(j=void 0),G[a]=void 0};if(H.preferredLanguage=function(a){return a&&N(a),e},H.cloakClassName=function(){return x},H.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(O(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)G[g[b]]||(G[g[b]]=S(g[b]));H.use(H.use())}return h?g[0]:g},H.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=I(g,a);b>-1&&(u=b)}else u=0},H.proposedLanguage=function(){return j},H.storage=function(){return f},H.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=K(a);return e&&(a=e),!z&&t[a]||!o||G[a]?j===a&&G[a]?G[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),R(a)):(j=a,G[a]=S(a).then(function(a){return L(a.key,a.table),b.resolve(a.key),R(a.key),a},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),G[a]["finally"](function(){cb(a)})),b.promise},H.storageKey=function(){return P()},H.isPostCompilingEnabled=function(){return y},H.isForceAsyncReloadEnabled=function(){return z},H.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){L(c.key,c.table),a===i&&R(i),b()};h.displayName="refreshPostProcessor",S(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(S(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(S(i));var n=function(a){t={},angular.forEach(a,function(a){L(a.key,a.table)}),i&&R(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},H.instant=function(a,b,c){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var d={},f=0,h=a.length;h>f;f++)d[a[f]]=H.instant(a[f],b,c);return d}if(angular.isString(a)&&a.length<1)return a;a&&(a=J.apply(a));var j,k=[];e&&k.push(e),i&&k.push(i),g&&g.length&&(k=k.concat(g));for(var l=0,n=k.length;n>l;l++){var o=k[l];if(t[o]&&("undefined"!=typeof t[o][a]?j=bb(a,b,c):(q||r)&&(j=Q(a))),"undefined"!=typeof j)break}return j||""===j||(j=A.interpolate(a,b),m&&!D&&(j=X(a,b))),j},H.versionInfo=function(){return F},H.loaderCache=function(){return s},H.directivePriority=function(){return B},H.statefulFilter=function(){return C},o&&(angular.equals(t,{})&&H.use(H.use()),g&&g.length))for(var db=function(a){return L(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},eb=0,fb=g.length;fb>eb;eb++){var gb=g[eb];(z||!t[gb])&&(G[gb]=S(gb).then(db))}return H}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,f){"use strict";var g=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=b[0].outerHTML.match(/translate-value-+/i),l="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",m="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,n,o){b.interpolateParams={},b.preText="",b.postText="";var p={},q=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),k)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},r=function(a){if(angular.isFunction(r._unwatchOld)&&(r._unwatchOld(),r._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=g.apply(n.text()).match(l);if(angular.isArray(d)){b.preText=d[1],b.postText=d[3],p.translate=c(d[2])(b.$parent);var e=n.text().match(m);angular.isArray(e)&&e[2]&&e[2].length&&(r._unwatchOld=b.$watch(e[2],function(a){p.translate=a,x()}))}else p.translate=n.text().replace(/^\s+|\s+$/g,"")}else p.translate=a;x()},s=function(a){o.$observe(a,function(b){p[a]=b,x()})};q(b.interpolateParams,o,h);var t=!0;o.$observe("translate",function(a){"undefined"==typeof a?r(""):""===a&&t||(p.translate=a,x()),t=!1});for(var u in o)o.hasOwnProperty(u)&&"translateAttr"===u.substr(0,13)&&s(u);if(o.$observe("translateDefault",function(a){b.defaultText=a}),i&&o.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var v=function(a){o.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var w in o)Object.prototype.hasOwnProperty.call(o,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&v(w)}var x=function(){for(var a in p)p.hasOwnProperty(a)&&void 0!==p[a]&&y(a,p[a],b,b.interpolateParams,b.defaultText)},y=function(b,c,d,e,f){c?a(c,e,j,f).then(function(a){z(a,d,!0,b)},function(a){z(a,d,!1,b)}):z(c,d,!1,b)},z=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),n.html(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),i="undefined"!=typeof h.translateCompile,j=i&&"false"!==h.translateCompile;(g&&!i||j)&&d(n.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=o.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),n.attr(k,b)}};(i||k||o.translateDefault)&&b.$watch("interpolateParams",x,!0);var A=f.$on("$translateChangeSuccess",x);n.text().length?r(o.translate?o.translate:""):o.translate&&r(o.translate),x(),b.$on("$destroy",A)}}}}function f(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}function g(a,b){"use strict";var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return b.statefulFilter()&&(c.$stateful=!0),c}function h(a){"use strict";return a("translations")}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",f),f.$inject=["$rootScope","$translate"],f.displayName="translateCloakDirective",angular.module("pascalprecht.translate").filter("translate",g),g.$inject=["$parse","$translate"],g.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",h),h.$inject=["$cacheFactory"],h.displayName="$translationCache","pascalprecht.translate"});!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!c||!c.url)throw new Error("Couldn't use urlLoader since no url is given!");var d=a.defer(),e={};return e[c.queryParameter||"lang"]=c.key,b(angular.extend({url:c.url,params:e,method:"GET"},c.$http)).success(function(a){d.resolve(a)}).error(function(){d.reject(c.key)}),d.promise}}return angular.module("pascalprecht.translate").factory("$translateUrlLoader",a),a.$inject=["$q","$http"],a.displayName="$translateUrlLoader","pascalprecht.translate"});!function(a){"use strict";function b(b,c,d){"addEventListener"in a?b.addEventListener(c,d,!1):"attachEvent"in a&&b.attachEvent("on"+c,d)}function c(){var b,c=["moz","webkit","o","ms"];for(b=0;b<c.length&&!M;b+=1)M=a[c[b]+"RequestAnimationFrame"];M||g("setup","RequestAnimationFrame not supported")}function d(b){var c="Host page: "+b;return a.top!==a.self&&(c=a.parentIFrame&&a.parentIFrame.getId?a.parentIFrame.getId()+": "+b:"Nested host page: "+b),c}function e(a){return J+"["+d(a)+"]"}function f(a){return O[a]?O[a].log:F}function g(a,b){j("log",a,b,f(a))}function h(a,b){j("info",a,b,f(a))}function i(a,b){j("warn",a,b,!0)}function j(b,c,d,f){!0===f&&"object"==typeof a.console&&console[b](e(c),d)}function k(b){function c(){function a(){r(M),o(N)}e("Height"),e("Width"),s(a,M,"init")}function d(){var a=H.substr(K).split(":");return{iframe:O[a[0]].iframe,id:a[0],height:a[1],width:a[2],type:a[3]}}function e(a){var b=Number(O[N]["max"+a]),c=Number(O[N]["min"+a]),d=a.toLowerCase(),e=Number(M[d]);g(N,"Checking "+d+" is in range "+c+"-"+b),c>e&&(e=c,g(N,"Set "+d+" to min value")),e>b&&(e=b,g(N,"Set "+d+" to max value")),M[d]=""+e}function f(){function a(){function a(){var a=0,b=!1;for(g(N,"Checking connection is from allowed list of origins: "+d);a<d.length;a++)if(d[a]===c){b=!0;break}return b}function b(){var a=O[N].remoteHost;return g(N,"Checking connection is from: "+a),c===a}return d.constructor===Array?a():b()}var c=b.origin,d=O[N].checkOrigin;if(d&&""+c!="null"&&!a())throw new Error("Unexpected message received from: "+c+" for "+M.iframe.id+". Message was: "+b.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function j(){return J===(""+H).substr(0,K)&&H.substr(K).split(":")[0]in O}function k(){var a=M.type in{"true":1,"false":1,undefined:1};return a&&g(N,"Ignoring init message from meta parent page"),a}function v(a){return H.substr(H.indexOf(":")+I+a)}function w(a){g(N,"MessageCallback passed: {iframe: "+M.iframe.id+", message: "+a+"}"),C("messageCallback",{iframe:M.iframe,message:JSON.parse(a)}),g(N,"--")}function x(){var a=!0;return null===M.iframe&&(i(N,"IFrame ("+M.id+") not found"),a=!1),a}function y(a){var b=a.getBoundingClientRect();return n(N),{x:Math.floor(Number(b.left)+Number(L.x)),y:Math.floor(Number(b.top)+Number(L.y))}}function z(b){function c(){L=h,A(),g(N,"--")}function d(){return{x:Number(M.width)+f.x,y:Number(M.height)+f.y}}function e(){a.parentIFrame?a.parentIFrame["scrollTo"+(b?"Offset":"")](h.x,h.y):i(N,"Unable to scroll to requested position, window.parentIFrame not found")}var f=b?y(M.iframe):{x:0,y:0},h=d();g(N,"Reposition requested from iFrame (offset x:"+f.x+" y:"+f.y+")"),a.top!==a.self?e():c()}function A(){!1!==C("scrollCallback",L)?o(N):p()}function B(b){function c(){var a=y(h);g(N,"Moving to in page link (#"+e+") at x: "+a.x+" y: "+a.y),L={x:a.x,y:a.y},A(),g(N,"--")}function d(){a.parentIFrame?a.parentIFrame.moveToAnchor(e):g(N,"In page link #"+e+" not found and window.parentIFrame not found")}var e=b.split("#")[1]||"",f=decodeURIComponent(e),h=document.getElementById(f)||document.getElementsByName(f)[0];h?c():a.top!==a.self?d():g(N,"In page link #"+e+" not found")}function C(a,b){return l(N,a,b)}function D(){switch(O[N].firstRun&&G(),M.type){case"close":m(M.iframe);break;case"message":w(v(6));break;case"scrollTo":z(!1);break;case"scrollToOffset":z(!0);break;case"inPageLink":B(v(9));break;case"reset":q(M);break;case"init":c(),C("initCallback",M.iframe),C("resizedCallback",M);break;default:c(),C("resizedCallback",M)}}function E(a){var b=!0;return O[a]||(b=!1,i(M.type+" No settings for "+a+". Message was: "+H)),b}function F(){for(var a in O)t("iFrame requested init",u(a),document.getElementById(a),a)}function G(){O[N].firstRun=!1}var H=b.data,M={},N=null;"[iFrameResizerChild]Ready"===H?F():j()?(M=d(),N=Q=M.id,!k()&&E(N)&&(g(N,"Received: "+H),x()&&f()&&D())):h(N,"Ignored: "+H)}function l(a,b,c){var d=null,e=null;if(O[a]){if(d=O[a][b],"function"!=typeof d)throw new TypeError(b+" on iFrame["+a+"] is not a function");e=d(c)}return e}function m(a){var b=a.id;g(b,"Removing iFrame: "+b),a.parentNode.removeChild(a),l(b,"closedCallback",b),g(b,"--"),delete O[b]}function n(b){null===L&&(L={x:void 0!==a.pageXOffset?a.pageXOffset:document.documentElement.scrollLeft,y:void 0!==a.pageYOffset?a.pageYOffset:document.documentElement.scrollTop},g(b,"Get page position: "+L.x+","+L.y))}function o(b){null!==L&&(a.scrollTo(L.x,L.y),g(b,"Set page position: "+L.x+","+L.y),p())}function p(){L=null}function q(a){function b(){r(a),t("reset","reset",a.iframe,a.id)}g(a.id,"Size reset requested by "+("init"===a.type?"host page":"iFrame")),n(a.id),s(b,a,"reset")}function r(a){function b(b){a.iframe.style[b]=a[b]+"px",g(a.id,"IFrame ("+e+") "+b+" set to "+a[b]+"px")}function c(b){G||"0"!==a[b]||(G=!0,g(e,"Hidden iFrame detected, creating visibility listener"),x())}function d(a){b(a),c(a)}var e=a.iframe.id;O[e]&&(O[e].sizeHeight&&d("height"),O[e].sizeWidth&&d("width"))}function s(a,b,c){c!==b.type&&M?(g(b.id,"Requesting animation frame"),M(a)):a()}function t(a,b,c,d){function e(){g(d,"["+a+"] Sending msg to iframe["+d+"] ("+b+") targetOrigin: "+i),c.contentWindow.postMessage(J+b,i)}function f(){h(d,"["+a+"] IFrame("+d+") not found"),O[d]&&delete O[d]}d=d||c.id;var i=O[d].targetOrigin;c&&"contentWindow"in c?e():f()}function u(a){return a+":"+O[a].bodyMarginV1+":"+O[a].sizeWidth+":"+O[a].log+":"+O[a].interval+":"+O[a].enablePublicMethods+":"+O[a].autoResize+":"+O[a].bodyMargin+":"+O[a].heightCalculationMethod+":"+O[a].bodyBackground+":"+O[a].bodyPadding+":"+O[a].tolerance+":"+O[a].inPageLinks+":"+O[a].resizeFrom+":"+O[a].widthCalculationMethod}function v(a,c){function d(){function b(b){1/0!==O[w][b]&&0!==O[w][b]&&(a.style[b]=O[w][b]+"px",g(w,"Set "+b+" = "+O[w][b]+"px"))}function c(a){if(O[w]["min"+a]>O[w]["max"+a])throw new Error("Value for min"+a+" can not be greater than max"+a)}c("Height"),c("Width"),b("maxHeight"),b("minHeight"),b("maxWidth"),b("minWidth")}function e(){var a=c.id||R.id+E++;return null!==document.getElementById(a)&&(a+=E++),a}function f(b){return Q=b,""===b&&(a.id=b=e(),F=(c||{}).log,Q=b,g(b,"Added missing iframe ID: "+b+" ("+a.src+")")),b}function h(){g(w,"IFrame scrolling "+(O[w].scrolling?"enabled":"disabled")+" for "+w),a.style.overflow=!1===O[w].scrolling?"hidden":"auto",a.scrolling=!1===O[w].scrolling?"no":"yes"}function j(){("number"==typeof O[w].bodyMargin||"0"===O[w].bodyMargin)&&(O[w].bodyMarginV1=O[w].bodyMargin,O[w].bodyMargin=""+O[w].bodyMargin+"px")}function k(){var b=O[w].firstRun,c=O[w].heightCalculationMethod in N;!b&&c&&q({iframe:a,height:0,width:0,type:"init"})}function l(){Function.prototype.bind&&(O[w].iframe.iFrameResizer={close:m.bind(null,O[w].iframe),resize:t.bind(null,"Window resize","resize",O[w].iframe),moveToAnchor:function(a){t("Move to anchor","inPageLink:"+a,O[w].iframe,w)},sendMessage:function(a){a=JSON.stringify(a),t("Send Message","message:"+a,O[w].iframe,w)}})}function n(c){function d(){t("iFrame.onload",c,a),k()}b(a,"load",d),t("init",c,a)}function o(a){if("object"!=typeof a)throw new TypeError("Options is not an object")}function p(a){for(var b in R)R.hasOwnProperty(b)&&(O[w][b]=a.hasOwnProperty(b)?a[b]:R[b])}function r(a){return""===a||"file://"===a?"*":a}function s(b){b=b||{},O[w]={firstRun:!0,iframe:a,remoteHost:a.src.split("/").slice(0,3).join("/")},o(b),p(b),O[w].targetOrigin=!0===O[w].checkOrigin?r(O[w].remoteHost):"*"}function v(){return w in O&&"iFrameResizer"in a}var w=f(a.id);v()?i(w,"Ignored iFrame, already setup."):(s(c),h(),d(),j(),n(u(w)),l())}function w(a,b){null===P&&(P=setTimeout(function(){P=null,a()},b))}function x(){function b(){function a(a){function b(b){return"0px"===O[a].iframe.style[b]}function c(a){return null!==a.offsetParent}c(O[a].iframe)&&(b("height")||b("width"))&&t("Visibility change","resize",O[a].iframe,a)}for(var b in O)a(b)}function c(a){g("window","Mutation observed: "+a[0].target+" "+a[0].type),w(b,16)}function d(){var a=document.querySelector("body"),b={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},d=new e(c);d.observe(a,b)}var e=a.MutationObserver||a.WebKitMutationObserver;e&&d()}function y(a){function b(){A("Window "+a,"resize")}g("window","Trigger event: "+a),w(b,16)}function z(){function a(){A("Tab Visable","resize")}"hidden"!==document.visibilityState&&(g("document","Trigger event: Visiblity change"),w(a,16))}function A(a,b){function c(a){return"parent"===O[a].resizeFrom&&O[a].autoResize&&!O[a].firstRun}for(var d in O)c(d)&&t(a,b,document.getElementById(d),d)}function B(){b(a,"message",k),b(a,"resize",function(){y("resize")}),b(document,"visibilitychange",z),b(document,"-webkit-visibilitychange",z),b(a,"focusin",function(){y("focus")}),b(a,"focus",function(){y("focus")})}function C(){function a(a,c){if(c){if(!c.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==c.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+c.tagName+">");v(c,a),b.push(c)}}var b;return c(),B(),function(c,d){switch(b=[],typeof d){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(d||"iframe"),a.bind(void 0,c));break;case"object":a(c,d);break;default:throw new TypeError("Unexpected data type ("+typeof d+")")}return b}}function D(a){a.fn.iFrameResize=function(a){return this.filter("iframe").each(function(b,c){v(c,a)}).end()}}var E=0,F=!1,G=!1,H="message",I=H.length,J="[iFrameSizer]",K=J.length,L=null,M=a.requestAnimationFrame,N={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},O={},P=null,Q="Host Page",R={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){i("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};a.jQuery&&D(jQuery),"function"==typeof define&&define.amd?define([],C):"object"==typeof module&&"object"==typeof module.exports?module.exports=C():a.iFrameResize=a.iFrameResize||C()}(window||{});;(function(window){'use strict';var
autoResize=true,base=10,bodyBackground='',bodyMargin=0,bodyMarginStr='',bodyObserver=null,bodyPadding='',calculateWidth=false,doubleEventList={'resize':1,'click':1},eventCancelTimer=128,firstRun=true,height=1,heightCalcModeDefault='bodyOffset',heightCalcMode=heightCalcModeDefault,initLock=true,initMsg='',inPageLinks={},interval=32,intervalTimer=null,logging=false,msgID='[iFrameSizer]',msgIdLen=msgID.length,myID='',observer=null,resetRequiredMethods={max:1,min:1,bodyScroll:1,documentElementScroll:1},resizeFrom='child',sendPermit=true,target=window.parent,targetOriginDefault='*',tolerance=0,triggerLocked=false,triggerLockedTimer=null,throttledTimer=16,width=1,widthCalcModeDefault='scroll',widthCalcMode=widthCalcModeDefault,win=window,messageCallback=function(){warn('MessageCallback function not defined');},readyCallback=function(){};function addEventListener(el,evt,func){if('addEventListener'in window){el.addEventListener(evt,func,false);}else if('attachEvent'in window){el.attachEvent('on'+evt,func);}}
function removeEventListener(el,evt,func){if('removeEventListener'in window){el.removeEventListener(evt,func,false);}else if('detachEvent'in window){el.detachEvent('on'+evt,func);}}
function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function throttle(func){var
context,args,result,timeout=null,previous=0,later=function(){previous=getNow();timeout=null;result=func.apply(context,args);if(!timeout){context=args=null;}};return function(){var now=getNow();if(!previous){previous=now;}
var remaining=throttledTimer-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>throttledTimer){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=func.apply(context,args);if(!timeout){context=args=null;}}else if(!timeout){timeout=setTimeout(later,remaining);}
return result;};}
var getNow=Date.now||function(){return new Date().getTime();};function formatLogMsg(msg){return msgID+'['+myID+']'+' '+msg;}
function log(msg){if(logging&&('object'===typeof window.console)){console.log(formatLogMsg(msg));}}
function warn(msg){if('object'===typeof window.console){console.warn(formatLogMsg(msg));}}
function init(){readDataFromParent();log('Initialising iFrame ('+location.href+')');readDataFromPage();setMargin();setBodyStyle('background',bodyBackground);setBodyStyle('padding',bodyPadding);injectClearFixIntoBodyElement();checkHeightMode();checkWidthMode();stopInfiniteResizingOfIFrame();setupPublicMethods();startEventListeners();inPageLinks=setupInPageLinks();sendSize('init','Init message from host page');readyCallback();}
function readDataFromParent(){function strBool(str){return'true'===str?true:false;}
var data=initMsg.substr(msgIdLen).split(':');myID=data[0];bodyMargin=(undefined!==data[1])?Number(data[1]):bodyMargin;calculateWidth=(undefined!==data[2])?strBool(data[2]):calculateWidth;logging=(undefined!==data[3])?strBool(data[3]):logging;interval=(undefined!==data[4])?Number(data[4]):interval;autoResize=(undefined!==data[6])?strBool(data[6]):autoResize;bodyMarginStr=data[7];heightCalcMode=(undefined!==data[8])?data[8]:heightCalcMode;bodyBackground=data[9];bodyPadding=data[10];tolerance=(undefined!==data[11])?Number(data[11]):tolerance;inPageLinks.enable=(undefined!==data[12])?strBool(data[12]):false;resizeFrom=(undefined!==data[13])?data[13]:resizeFrom;widthCalcMode=(undefined!==data[14])?data[14]:widthCalcMode;}
function readDataFromPage(){function readData(){var data=window.iFrameResizer;log('Reading data from page: '+JSON.stringify(data));messageCallback=('messageCallback'in data)?data.messageCallback:messageCallback;readyCallback=('readyCallback'in data)?data.readyCallback:readyCallback;targetOriginDefault=('targetOrigin'in data)?data.targetOrigin:targetOriginDefault;heightCalcMode=('heightCalculationMethod'in data)?data.heightCalculationMethod:heightCalcMode;widthCalcMode=('widthCalculationMethod'in data)?data.widthCalculationMethod:widthCalcMode;}
if(('iFrameResizer'in window)&&(Object===window.iFrameResizer.constructor)){readData();}
log('TargetOrigin for parent set to: '+targetOriginDefault);}
function chkCSS(attr,value){if(-1!==value.indexOf('-')){warn('Negative CSS value ignored for '+attr);value='';}
return value;}
function setBodyStyle(attr,value){if((undefined!==value)&&(''!==value)&&('null'!==value)){document.body.style[attr]=value;log('Body '+attr+' set to "'+value+'"');}}
function setMargin(){if(undefined===bodyMarginStr){bodyMarginStr=bodyMargin+'px';}
setBodyStyle('margin',chkCSS('margin',bodyMarginStr));}
function stopInfiniteResizingOfIFrame(){document.documentElement.style.height='';document.body.style.height='';log('HTML & body height set to "auto"');}
function manageTriggerEvent(options){function handleEvent(){sendSize(options.eventName,options.eventType);}
var listener={add:function(eventName){addEventListener(window,eventName,handleEvent);},remove:function(eventName){removeEventListener(window,eventName,handleEvent);}};if(options.eventNames&&Array.prototype.map){options.eventName=options.eventNames[0];options.eventNames.map(listener[options.method]);}else{listener[options.method](options.eventName);}
log(capitalizeFirstLetter(options.method)+' event listener: '+options.eventType);}
function manageEventListeners(method){manageTriggerEvent({method:method,eventType:'Animation Start',eventNames:['animationstart','webkitAnimationStart']});manageTriggerEvent({method:method,eventType:'Animation Iteration',eventNames:['animationiteration','webkitAnimationIteration']});manageTriggerEvent({method:method,eventType:'Animation End',eventNames:['animationend','webkitAnimationEnd']});manageTriggerEvent({method:method,eventType:'Input',eventName:'input'});manageTriggerEvent({method:method,eventType:'Mouse Up',eventName:'mouseup'});manageTriggerEvent({method:method,eventType:'Mouse Down',eventName:'mousedown'});manageTriggerEvent({method:method,eventType:'Orientation Change',eventName:'orientationchange'});manageTriggerEvent({method:method,eventType:'Touch Start',eventName:'touchstart'});manageTriggerEvent({method:method,eventType:'Touch End',eventName:'touchend'});manageTriggerEvent({method:method,eventType:'Touch Cancel',eventName:'touchcancel'});manageTriggerEvent({method:method,eventType:'Print',eventName:['afterprint','beforeprint']});manageTriggerEvent({method:method,eventType:'Transition Start',eventNames:['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart']});manageTriggerEvent({method:method,eventType:'Transition Iteration',eventNames:['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration']});manageTriggerEvent({method:method,eventType:'Transition End',eventNames:['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend']});if('child'===resizeFrom){manageTriggerEvent({method:method,eventType:'IFrame Resized',eventName:'resize'});}}
function checkCalcMode(calcMode,calcModeDefault,modes,type){if(calcModeDefault!==calcMode){if(!(calcMode in modes)){warn(calcMode+' is not a valid option for '+type+'CalculationMethod.');calcMode=calcModeDefault;}
log(type+' calculation method set to "'+calcMode+'"');}
return calcMode;}
function checkHeightMode(){heightCalcMode=checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');}
function checkWidthMode(){widthCalcMode=checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');}
function startEventListeners(){if(true===autoResize){manageEventListeners('add');setupMutationObserver();}
else{log('Auto Resize disabled');}}
function stopMsgsToParent(){log('Disable outgoing messages');sendPermit=false;}
function removeMsgListener(){log('Remove event listener: Message');removeEventListener(window,'message',receiver);}
function disconnectMutationObserver(){if(null!==bodyObserver){bodyObserver.disconnect();}}
function stopEventListeners(){manageEventListeners('remove');disconnectMutationObserver();clearInterval(intervalTimer);}
function teardown(){stopMsgsToParent();removeMsgListener();stopEventListeners();}
function injectClearFixIntoBodyElement(){var clearFix=document.createElement('div');clearFix.style.clear='both';clearFix.style.display='block';document.body.appendChild(clearFix);}
function setupInPageLinks(){function getPagePosition(){return{x:(window.pageXOffset!==undefined)?window.pageXOffset:document.documentElement.scrollLeft,y:(window.pageYOffset!==undefined)?window.pageYOffset:document.documentElement.scrollTop};}
function getElementPosition(el){var
elPosition=el.getBoundingClientRect(),pagePosition=getPagePosition();return{x:parseInt(elPosition.left,10)+parseInt(pagePosition.x,10),y:parseInt(elPosition.top,10)+parseInt(pagePosition.y,10)};}
function findTarget(location){function jumpToTarget(target){var jumpPosition=getElementPosition(target);log('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);sendMsg(jumpPosition.y,jumpPosition.x,'scrollToOffset');}
var
hash=location.split('#')[1]||location,hashData=decodeURIComponent(hash),target=document.getElementById(hashData)||document.getElementsByName(hashData)[0];if(undefined!==target){jumpToTarget(target);}else{log('In page link (#'+hash+') not found in iFrame, so sending to parent');sendMsg(0,0,'inPageLink','#'+hash);}}
function checkLocationHash(){if(''!==location.hash&&'#'!==location.hash){findTarget(location.href);}}
function bindAnchors(){function setupLink(el){function linkClicked(e){e.preventDefault();findTarget(this.getAttribute('href'));}
if('#'!==el.getAttribute('href')){addEventListener(el,'click',linkClicked);}}
Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),setupLink);}
function bindLocationHash(){addEventListener(window,'hashchange',checkLocationHash);}
function initCheck(){setTimeout(checkLocationHash,eventCancelTimer);}
function enableInPageLinks(){if(Array.prototype.forEach&&document.querySelectorAll){log('Setting up location.hash handlers');bindAnchors();bindLocationHash();initCheck();}else{warn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');}}
if(inPageLinks.enable){enableInPageLinks();}else{log('In page linking not enabled');}
return{findTarget:findTarget};}
function setupPublicMethods(){log('Enable public methods');win.parentIFrame={autoResize:function autoResizeF(resize){if(true===resize&&false===autoResize){autoResize=true;startEventListeners();}else if(false===resize&&true===autoResize){autoResize=false;stopEventListeners();}
return autoResize;},close:function closeF(){sendMsg(0,0,'close');teardown();},getId:function getIdF(){return myID;},moveToAnchor:function moveToAnchorF(hash){inPageLinks.findTarget(hash);},reset:function resetF(){resetIFrame('parentIFrame.reset');},scrollTo:function scrollToF(x,y){sendMsg(y,x,'scrollTo');},scrollToOffset:function scrollToF(x,y){sendMsg(y,x,'scrollToOffset');},sendMessage:function sendMessageF(msg,targetOrigin){sendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);},setHeightCalculationMethod:function setHeightCalculationMethodF(heightCalculationMethod){heightCalcMode=heightCalculationMethod;checkHeightMode();},setWidthCalculationMethod:function setWidthCalculationMethodF(widthCalculationMethod){widthCalcMode=widthCalculationMethod;checkWidthMode();},setTargetOrigin:function setTargetOriginF(targetOrigin){log('Set targetOrigin: '+targetOrigin);targetOriginDefault=targetOrigin;},size:function sizeF(customHeight,customWidth){var valString=''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');sendSize('size','parentIFrame.size('+valString+')',customHeight,customWidth);}};}
function initInterval(){if(0!==interval){log('setInterval: '+interval+'ms');intervalTimer=setInterval(function(){sendSize('interval','setInterval: '+interval);},Math.abs(interval));}}
function setupBodyMutationObserver(){function addImageLoadListners(mutation){function addImageLoadListener(element){if(false===element.complete){log('Attach listeners to '+element.src);element.addEventListener('load',imageLoaded,false);element.addEventListener('error',imageError,false);elements.push(element);}}
if(mutation.type==='attributes'&&mutation.attributeName==='src'){addImageLoadListener(mutation.target);}else if(mutation.type==='childList'){Array.prototype.forEach.call(mutation.target.querySelectorAll('img'),addImageLoadListener);}}
function removeFromArray(element){elements.splice(elements.indexOf(element),1);}
function removeImageLoadListener(element){log('Remove listeners from '+element.src);element.removeEventListener('load',imageLoaded,false);element.removeEventListener('error',imageError,false);removeFromArray(element);}
function imageEventTriggered(event,type,typeDesc){removeImageLoadListener(event.target);sendSize(type,typeDesc+': '+event.target.src,undefined,undefined);}
function imageLoaded(event){imageEventTriggered(event,'imageLoad','Image loaded');}
function imageError(event){imageEventTriggered(event,'imageLoadFailed','Image load failed');}
function mutationObserved(mutations){sendSize('mutationObserver','mutationObserver: '+mutations[0].target+' '+mutations[0].type);mutations.forEach(addImageLoadListners);}
function createMutationObserver(){var
target=document.querySelector('body'),config={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true};observer=new MutationObserver(mutationObserved);log('Create body MutationObserver');observer.observe(target,config);return observer;}
var
elements=[],MutationObserver=window.MutationObserver||window.WebKitMutationObserver,observer=createMutationObserver();return{disconnect:function(){if('disconnect'in observer){log('Disconnect body MutationObserver');observer.disconnect();elements.forEach(removeImageLoadListener);}}};}
function setupMutationObserver(){var forceIntervalTimer=0>interval;if(window.MutationObserver||window.WebKitMutationObserver){if(forceIntervalTimer){initInterval();}else{bodyObserver=setupBodyMutationObserver();}}else{log('MutationObserver not supported in this browser!');initInterval();}}
function getComputedBodyStyle(prop){function convertUnitsToPxForIE8(value){var PIXEL=/^\d+(px)?$/i;if(PIXEL.test(value)){return parseInt(value,base);}
var
style=el.style.left,runtimeStyle=el.runtimeStyle.left;el.runtimeStyle.left=el.currentStyle.left;el.style.left=value||0;value=el.style.pixelLeft;el.style.left=style;el.runtimeStyle.left=runtimeStyle;return value;}
var
el=document.body,retVal=0;if(('defaultView'in document)&&('getComputedStyle'in document.defaultView)){retVal=document.defaultView.getComputedStyle(el,null);retVal=(null!==retVal)?retVal[prop]:0;}else{retVal=convertUnitsToPxForIE8(el.currentStyle[prop]);}
return parseInt(retVal,base);}
function chkEventThottle(timer){if(timer>throttledTimer/2){throttledTimer=2*timer;log('Event throttle increased to '+throttledTimer+'ms');}}
function getMaxElement(side,elements){var
elementsLength=elements.length,elVal=0,maxVal=0,Side=capitalizeFirstLetter(side),timer=getNow();for(var i=0;i<elementsLength;i++){elVal=elements[i].getBoundingClientRect()[side]+getComputedBodyStyle('margin'+Side);if(elVal>maxVal){maxVal=elVal;}}
timer=getNow()-timer;log('Parsed '+elementsLength+' HTML elements');log('Element position calculated in '+timer+'ms');chkEventThottle(timer);return maxVal;}
function getAllMeasurements(dimention){return[dimention.bodyOffset(),dimention.bodyScroll(),dimention.documentElementOffset(),dimention.documentElementScroll()];}
function getTaggedElements(side,tag){function noTaggedElementsFound(){warn('No tagged elements ('+tag+') found on page');return height;}
var elements=document.querySelectorAll('['+tag+']');return 0===elements.length?noTaggedElementsFound():getMaxElement(side,elements);}
function getAllElements(){return document.querySelectorAll('body *');}
var
getHeight={bodyOffset:function getBodyOffsetHeight(){return document.body.offsetHeight+getComputedBodyStyle('marginTop')+getComputedBodyStyle('marginBottom');},offset:function(){return getHeight.bodyOffset();},bodyScroll:function getBodyScrollHeight(){return document.body.scrollHeight;},documentElementOffset:function getDEOffsetHeight(){return document.documentElement.offsetHeight;},documentElementScroll:function getDEScrollHeight(){return document.documentElement.scrollHeight;},max:function getMaxHeight(){return Math.max.apply(null,getAllMeasurements(getHeight));},min:function getMinHeight(){return Math.min.apply(null,getAllMeasurements(getHeight));},grow:function growHeight(){return getHeight.max();},lowestElement:function getBestHeight(){return Math.max(getHeight.bodyOffset(),getMaxElement('bottom',getAllElements()));},taggedElement:function getTaggedElementsHeight(){return getTaggedElements('bottom','data-iframe-height');}},getWidth={bodyScroll:function getBodyScrollWidth(){return document.body.scrollWidth;},bodyOffset:function getBodyOffsetWidth(){return document.body.offsetWidth;},documentElementScroll:function getDEScrollWidth(){return document.documentElement.scrollWidth;},documentElementOffset:function getDEOffsetWidth(){return document.documentElement.offsetWidth;},scroll:function getMaxWidth(){return Math.max(getWidth.bodyScroll(),getWidth.documentElementScroll());},max:function getMaxWidth(){return Math.max.apply(null,getAllMeasurements(getWidth));},min:function getMinWidth(){return Math.min.apply(null,getAllMeasurements(getWidth));},leftMostElement:function getLeftMostElement(){return getMaxElement('left',getAllElements());},taggedElement:function getTaggedElementsWidth(){return getTaggedElements('left','data-iframe-width');}};function sizeIFrame(triggerEvent,triggerEventDesc,customHeight,customWidth){function resizeIFrame(){height=currentHeight;width=currentWidth;sendMsg(height,width,triggerEvent);}
function isSizeChangeDetected(){function checkTolarance(a,b){var retVal=Math.abs(a-b)<=tolerance;return!retVal;}
currentHeight=(undefined!==customHeight)?customHeight:getHeight[heightCalcMode]();currentWidth=(undefined!==customWidth)?customWidth:getWidth[widthCalcMode]();return checkTolarance(height,currentHeight)||(calculateWidth&&checkTolarance(width,currentWidth));}
function isForceResizableEvent(){return!(triggerEvent in{'init':1,'interval':1,'size':1});}
function isForceResizableCalcMode(){return(heightCalcMode in resetRequiredMethods)||(calculateWidth&&widthCalcMode in resetRequiredMethods);}
function logIgnored(){log('No change in size detected');}
function checkDownSizing(){if(isForceResizableEvent()&&isForceResizableCalcMode()){resetIFrame(triggerEventDesc);}else if(!(triggerEvent in{'interval':1})){logIgnored();}}
var currentHeight,currentWidth;if(isSizeChangeDetected()||'init'===triggerEvent){lockTrigger();resizeIFrame();}else{checkDownSizing();}}
var sizeIFrameThrottled=throttle(sizeIFrame);function sendSize(triggerEvent,triggerEventDesc,customHeight,customWidth){function recordTrigger(){if(!(triggerEvent in{'reset':1,'resetPage':1,'init':1})){log('Trigger event: '+triggerEventDesc);}}
function isDoubleFiredEvent(){return triggerLocked&&(triggerEvent in doubleEventList);}
if(!isDoubleFiredEvent()){recordTrigger();sizeIFrameThrottled(triggerEvent,triggerEventDesc,customHeight,customWidth);}else{log('Trigger event cancelled: '+triggerEvent);}}
function lockTrigger(){if(!triggerLocked){triggerLocked=true;log('Trigger event lock on');}
clearTimeout(triggerLockedTimer);triggerLockedTimer=setTimeout(function(){triggerLocked=false;log('Trigger event lock off');log('--');},eventCancelTimer);}
function triggerReset(triggerEvent){height=getHeight[heightCalcMode]();width=getWidth[widthCalcMode]();sendMsg(height,width,triggerEvent);}
function resetIFrame(triggerEventDesc){var hcm=heightCalcMode;heightCalcMode=heightCalcModeDefault;log('Reset trigger event: '+triggerEventDesc);lockTrigger();triggerReset('reset');heightCalcMode=hcm;}
function sendMsg(height,width,triggerEvent,msg,targetOrigin){function setTargetOrigin(){if(undefined===targetOrigin){targetOrigin=targetOriginDefault;}else{log('Message targetOrigin: '+targetOrigin);}}
function sendToParent(){var
size=height+':'+width,message=myID+':'+size+':'+triggerEvent+(undefined!==msg?':'+msg:'');log('Sending message to host page ('+message+')');target.postMessage(msgID+message,targetOrigin);}
if(true===sendPermit){setTargetOrigin();sendToParent();}}
function receiver(event){function isMessageForUs(){return msgID===(''+event.data).substr(0,msgIdLen);}
function initFromParent(){initMsg=event.data;target=event.source;init();firstRun=false;setTimeout(function(){initLock=false;},eventCancelTimer);}
function resetFromParent(){if(!initLock){log('Page size reset by host page');triggerReset('resetPage');}else{log('Page reset ignored by init');}}
function resizeFromParent(){sendSize('resizeParent','Parent window requested size check');}
function moveToAnchor(){var anchor=getData();inPageLinks.findTarget(anchor);}
function getMessageType(){return event.data.split(']')[1].split(':')[0];}
function getData(){return event.data.substr(event.data.indexOf(':')+1);}
function isMiddleTier(){return('iFrameResize'in window);}
function messageFromParent(){var msgBody=getData();log('MessageCallback called from parent: '+msgBody);messageCallback(JSON.parse(msgBody));log(' --');}
function isInitMsg(){return event.data.split(':')[2]in{'true':1,'false':1};}
function callFromParent(){switch(getMessageType()){case'reset':resetFromParent();break;case'resize':resizeFromParent();break;case'moveToAnchor':moveToAnchor();break;case'message':messageFromParent();break;default:if(!isMiddleTier()&&!isInitMsg()){warn('Unexpected message ('+event.data+')');}}}
function processMessage(){if(false===firstRun){callFromParent();}else if(isInitMsg()){initFromParent();}else{log('Ignored message of type "'+getMessageType()+'". Received before initialization.');}}
if(isMessageForUs()){processMessage();}}
function chkLateLoaded(){if('loading'!==document.readyState){window.parent.postMessage('[iFrameResizerChild]Ready','*');}}
addEventListener(window,'message',receiver);chkLateLoaded();})(window||{});